<!DOCTYPE html>

<html>
<head>
  <title>vmxApi.js.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>vmxApi.js.md</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>var vmxApi;
(function(){
“use strict”;
var inited = false;
var _vmxApi;
/<em>Constructor</em>/</p>
<p>function VmxApi(){
   //<code>detectors</code> is a hashed array, keyed by model name; Each element is itself a hashed array of detectors, keyed by connectionId
   var detectors = {};</p>
<p>  return {
    reset: function() {
      detectors = {};
    },
    select : function(selector){
      if(selector &amp;&amp; !(this.$selected = detectors[selector])) {
         throw {message: “No detector”, name: “No detector”};
      }
      return this;
    },
    processServerResponse : function(params){
      var detections   = params.detections;
      var model_name   = params.name || detections[0].cls;
      var connectionId = params.connectionId;
      var _detector;
      var _like_detectors;
      if(_like_detectors = detectors[model_name]){
        /<strong> There are already detectors for this model running */
        if (_detector = _like_detectors[connectionId]){
          /</strong> This model is already running, and we should do something <em>/
          //what do when it already exists?
          return this;
        } else {
          /** This is the first time a detector has fired for this model </em>/
          _detector = detectors[model_name][connectionId] = detections;
          return this;
        }
      } else {
        /<em>* This is the first firing of ANY detector for this model_name </em>/
        detectors[model_name] = {};
        detectors[model_name][connectionId] = detections;
      }
      console.log(&quot;process_server_response called for&quot;, model_name);
      return this;
    },
    everDetected : function(){
      return this.$selected !== undefined;
    }
  };
}</p>
<p>vmxApi = function(selector){
  if(!inited){
    _vmxApi = new VmxApi();
    inited = true;
  }
  if(selector){
    return _vmxApi.select(selector);
  } else {
    return _vmxApi;
  }
};
vmxApi();</p>
<p>vmxApi.reset = _vmxApi.reset;
vmxApi.processServerResponse = _vmxApi.processServerResponse;</p>
<p>})();</p>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
